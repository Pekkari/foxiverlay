From 68952fe18150a94b1da4b9353c80bd567515bf7b Mon Sep 17 00:00:00 2001
From: Antonio Caggiano <antonio.caggiano@collabora.com>
Date: Wed, 20 Sep 2023 07:09:55 +0300
Subject: [PATCH 8/8] hack: Do not check resource in assign UUID
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Jos√© Pekkarinen <jose.pekkarinen@foxhound.fi>
Signed-off-by: Antonio Caggiano <antonio.caggiano@collabora.com>
---
 hw/display/virtio-gpu.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/hw/display/virtio-gpu.c b/hw/display/virtio-gpu.c
index d93e22bc99..63af9af0f2 100644
--- a/hw/display/virtio-gpu.c
+++ b/hw/display/virtio-gpu.c
@@ -971,7 +971,6 @@ virtio_gpu_resource_detach_backing(VirtIOGPU *g,
 void virtio_gpu_resource_assign_uuid(VirtIOGPU *g,
                                      struct virtio_gpu_ctrl_command *cmd)
 {
-    struct virtio_gpu_simple_resource *res;
     struct virtio_gpu_resource_assign_uuid assign;
     struct virtio_gpu_resp_resource_uuid resp;
 
@@ -979,11 +978,6 @@ void virtio_gpu_resource_assign_uuid(VirtIOGPU *g,
     virtio_gpu_bswap_32(&assign, sizeof(assign));
     trace_virtio_gpu_cmd_res_assign_uuid(assign.resource_id);
 
-    res = virtio_gpu_find_check_resource(g, assign.resource_id, false, __func__, &cmd->error);
-    if (!res) {
-        return;
-    }
-
     memset(&resp, 0, sizeof(resp));
     resp.hdr.type = VIRTIO_GPU_RESP_OK_RESOURCE_UUID;
     /* FIXME: for the moment use the resource id as UUID */
-- 
2.41.0

